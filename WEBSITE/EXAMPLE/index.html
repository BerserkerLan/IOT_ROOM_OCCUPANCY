<!doctype html>
<html>

<head>
  <title>Firebase Basic Example</title>
  <!-- including FusionCharts core package JS files -->
  <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.8.4/firebase-firestore.js"></script>
  <link rel="stylesheet" href="assets/css/main.css">


  <script src="assets/scripts/app.js"></script>
  <script>
  //This is required, otherwise doesn't work
  const firebase = require("firebase");
  // Required for side-effects
  require("firebase/firestore");
  </script>
  <script>
    window.addEventListener("load", genFunction());
    function genFunction() {

    document.write("TEST1");
    var db = firebaseApp.firestore();
    var docRef = db.collection("AUX").doc("MOST_POPULAR_DAY");
    const comments = [];

    //This will get the most popular day
    var docRef = db.collection("AUX").doc("MOST_POPULAR_DAY");
    docRef.get().then(function(doc) {
    if (doc.exists) {
        console.log("Document data:", doc.data());
        const MOST_POPULAR_DAY = doc.data()['Day'];
       // document.write(comment);
    } else {
        console.log("No such document!");
    }
    }).catch(function(error) {
    console.log("Error getting document:", error);
    });

    //This will get the most popular month
    var docRef = db.collection("AUX").doc("MOST_POPULAR_MONTH");
    docRef.get().then(function(doc) {
    if (doc.exists) {
        console.log("Document data:", doc.data());
        const MOST_POPULAR_MONTH = doc.data()['Month'];
       // document.write(comment);
    } else {
        console.log("No such document!");
    }
    }).catch(function(error) {
    console.log("Error getting document:", error);
    });

    //This will get the most popular time
    var docRef = db.collection("AUX").doc("MOST_POPULAR_TIME");
    docRef.get().then(function(doc) {
    if (doc.exists) {
        console.log("Document data:", doc.data());
        const MOST_POPULAR_TIME = doc.data()['Time'];
       // document.write(comment);
    } else {
        console.log("No such document!");
    }
    }).catch(function(error) {
    console.log("Error getting document:", error);
   });




      document.write("TEST2");
    }


  </script>
</head>

<body>
  <div id="chart-container"><svg width="90px"  height="90px"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-rolling" style="background: none;"><circle cx="50" cy="50" fill="none" ng-attr-stroke="{{config.color}}" ng-attr-stroke-width="{{config.width}}" ng-attr-r="{{config.radius}}" ng-attr-stroke-dasharray="{{config.dasharray}}" stroke="#6ac1a5" stroke-width="9" r="33" stroke-dasharray="155.50883635269477 53.83627878423159" transform="rotate(324 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></circle></svg></div>
</body>

</html>
